flowchart TD
    %% Frontend Components
    Browser["ğŸŒ Navegador Web"]
    React["âš›ï¸ React Frontend<br/>â€¢ Dashboard<br/>â€¢ GestÃ£o de Pacientes<br/>â€¢ Consultas<br/>â€¢ Planos Alimentares"]
    Router["ğŸ”€ React Router<br/>â€¢ Rotas Protegidas<br/>â€¢ NavegaÃ§Ã£o SPA"]
    
    %% HTTP Layer
    HTTP["ğŸ“¡ HTTP/HTTPS<br/>â€¢ Axios Client<br/>â€¢ CORS Headers<br/>â€¢ Rate Limiting"]
    
    %% Backend Components
    Express["ğŸš€ Express.js API<br/>â€¢ REST Endpoints<br/>â€¢ Middleware Chain<br/>â€¢ Error Handling"]
    Auth["ğŸ” AutenticaÃ§Ã£o<br/>â€¢ JWT Tokens<br/>â€¢ Password Hashing<br/>â€¢ Route Protection"]
    Validation["âœ… ValidaÃ§Ã£o<br/>â€¢ Zod Schemas<br/>â€¢ Input Sanitization<br/>â€¢ Business Rules"]
    
    %% Services
    AIService["ğŸ¤– ServiÃ§o de IA<br/>â€¢ Google Gemini<br/>â€¢ GeraÃ§Ã£o de Planos<br/>â€¢ Fallback Strategy"]
    
    %% Database
    MySQL["ğŸ—„ï¸ MySQL Database<br/>â€¢ 6 Tabelas Principais<br/>â€¢ Relacionamentos<br/>â€¢ Constraints"]
    Sequelize["ğŸ”— Sequelize ORM<br/>â€¢ Models & Migrations<br/>â€¢ Query Builder<br/>â€¢ Associations"]
    
    %% File System
    FileSystem["ğŸ’¾ Sistema de Arquivos<br/>â€¢ Upload de Arquivos<br/>â€¢ Metadata Storage"]
    
    %% External Services
    GoogleAI["ğŸ§  Google Gemini API<br/>â€¢ AI Text Generation<br/>â€¢ Meal Plan Creation"]
    
    %% User Flow
    Browser --> React
    React --> Router
    Router --> HTTP
    
    %% API Communication
    HTTP --> Express
    Express --> Auth
    Auth --> Validation
    Validation --> Sequelize
    
    %% External Integration
    Express --> AIService
    AIService --> GoogleAI
    GoogleAI -.-> AIService
    AIService -.-> Express
    
    %% Database Operations
    Sequelize --> MySQL
    MySQL --> Sequelize
    
    %% File Operations
    Express --> FileSystem
    FileSystem --> Express
    
    %% Response Flow
    Sequelize -.-> Express
    Express -.-> HTTP
    HTTP -.-> React
    React -.-> Browser
    
    %% Styling
    classDef frontend fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef backend fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef database fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef external fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef security fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef http fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    
    class Browser,React,Router frontend
    class Express,Validation,AIService backend
    class MySQL,Sequelize,FileSystem database
    class GoogleAI external
    class Auth security
    class HTTP http
